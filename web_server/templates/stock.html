{% extends 'base.html' %}
{% block content %}


<div id="chart" style="width: 900px; height: 500px"></div>
<a href="#" onclick="stockSell()">매도</a>
<a href="#" onclick="stockBuy()">매수</a>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);
  values = {{values|tojson}};

  function drawChart() {
    var data = google.visualization.arrayToDataTable(values.chart_data);
    var options = {
      title: values.chart_name
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart'));

    chart.draw(data, options);
  }
  function stockSell(){
  let price = values.chart_data[values.chart_data.length-1][1];
    window.open('{{url_for("stock_sell")}}?id={{values.chart_code}}&name={{values.chart_name}}&price='+price,'name','resizable=no width=600 height=500');return false;
    }
  function stockBuy(){
  let price = values.chart_data[values.chart_data.length-1][1];
    window.open('{{url_for("stock_buy")}}?id={{values.chart_code}}&name={{values.chart_name}}&price='+price,'name','resizable=no width=600 height=500');return false;
    }

</script>

{% endblock %}